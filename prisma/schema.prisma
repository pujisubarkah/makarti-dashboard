generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["makarti"]
}

model Inovasi {
  id            Int      @id @default(autoincrement())
  judul         String
  tahap         String
  tanggal       DateTime
  indikator     String
  unit_kerja_id Int?
  users         users?   @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model Koordinasi {
  id            Int      @id @default(autoincrement())
  tanggal       DateTime
  instansi      String
  jenisInstansi String
  topik         String
  catatan       String?
  unit_kerja_id Int
  createdAt     DateTime @default(now())
  Status        String?
  users         users    @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model Networking {
  id            Int      @id @default(autoincrement())
  instansi      String
  jenis         String
  catatan       String
  unit_kerja_id Int
  createdAt     DateTime @default(now())
  status        String?
  users         users    @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model Pelatihan {
  id            Int      @id @default(autoincrement())
  pegawai_id    Int
  unit_kerja_id Int
  judul         String
  jam           Int
  tanggal       DateTime
  pegawai       pegawai  @relation(fields: [pegawai_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users         users    @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model Penyelenggaraan {
  id                          Int                         @id @default(autoincrement())
  namaKegiatan                String
  tanggal                     DateTime
  jenis_bangkom_id            Int
  jumlahPeserta               Int
  unit_kerja_id               Int?
  jenis_bangkom_non_pelatihan jenis_bangkom_non_pelatihan @relation(fields: [jenis_bangkom_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users                       users?                      @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model ProdukInovasi {
  id             Int            @id @default(autoincrement())
  nama           String
  jenis          String
  status_id      Int
  tanggalRilis   DateTime
  keterangan     String?
  unit_kerja_id  Int?
  status_inovasi status_inovasi @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users          users?         @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model Publikasi {
  id            Int      @id @default(autoincrement())
  judul         String
  tanggal       DateTime
  jenis         String
  unit_kerja_id Int
  link          String
  likes         Int?
  views         Int?
  createdAt     DateTime @default(now())
  users         users    @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model SkpTransformasional {
  id            Int      @id @default(autoincrement())
  pegawai       String
  unit_kerja_id Int
  inovasi       String
  target        String
  status        String
  dampak        String?
  createdAt     DateTime @default(now())
  users         users    @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model Sosialisasi {
  id            Int      @id @default(autoincrement())
  nama          String
  tanggal       DateTime
  jenis         String
  platform      String
  unit_kerja_id Int
  peserta       Int
  createdAt     DateTime @default(now())
  users         users    @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model jenis_bangkom_non_pelatihan {
  id              Int               @id @default(autoincrement())
  created_at      DateTime          @default(now()) @db.Timestamptz(6)
  jenis_bangkom   String?
  Penyelenggaraan Penyelenggaraan[]

  @@schema("makarti")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model kajian {
  id            Int      @id @default(autoincrement())
  created_at    DateTime @default(now()) @db.Timestamptz(6)
  judul         String?
  jenis         String?
  status        String?
  unit_kerja_id Int?
  users         users?   @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

model org_departments {
  id        Int         @id(map: "departments_pkey") @default(autoincrement())
  name      String      @unique(map: "departments_name_key") @db.VarChar(255)
  color     String?     @db.VarChar(255)
  org_units org_units[]

  @@schema("makarti")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model org_kpis {
  id        Int       @id(map: "kpis_pkey") @default(autoincrement())
  unit_id   Int       @unique(map: "kpis_unit_id_key")
  target    Int
  achieved  Int
  status    String    @db.VarChar(20)
  org_units org_units @relation(fields: [unit_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "kpis_unit_id_fkey")

  @@schema("makarti")
}

model org_metrics {
  id         Int       @id(map: "metrics_pkey") @default(autoincrement())
  unit_id    Int       @unique(map: "metrics_unit_id_key")
  inovasi    Int
  komunikasi Int
  networking Int
  learning   Int
  org_units  org_units @relation(fields: [unit_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "metrics_unit_id_fkey")

  @@schema("makarti")
}

model org_positions {
  id        Int         @id(map: "positions_pkey") @default(autoincrement())
  title     String      @unique(map: "positions_title_key") @db.VarChar(255)
  org_units org_units[]

  @@schema("makarti")
}

model org_units {
  id              Int             @id(map: "units_pkey") @default(autoincrement())
  name            String          @db.VarChar(255)
  position_id     Int
  department_id   Int
  level           Int
  parent_id       Int?
  org_kpis        org_kpis?
  org_metrics     org_metrics?
  org_departments org_departments @relation(fields: [department_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "units_department_id_fkey")
  org_units       org_units?      @relation("org_unitsToorg_units", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "units_parent_id_fkey")
  other_org_units org_units[]     @relation("org_unitsToorg_units")
  org_positions   org_positions   @relation(fields: [position_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "units_position_id_fkey")

  @@schema("makarti")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model pegawai {
  id            Int         @id @default(autoincrement())
  created_at    DateTime    @default(now()) @db.Timestamptz(6)
  nip           String?     @default("18") @db.VarChar
  nama          String?     @default("225") @db.VarChar
  unit_kerja_id Int?
  jabatan       String?
  golongan      String?     @db.VarChar
  eselon        String?     @db.VarChar(10)
  Pelatihan     Pelatihan[]
  users         users?      @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model role_user {
  id         Int      @id @default(autoincrement())
  created_at DateTime @default(now()) @db.Timestamptz(6)
  role_user  String?
  users      users[]

  @@schema("makarti")
}

model serapan_anggaran {
  id                    Int       @id @default(autoincrement())
  bulan                 String    @db.VarChar(20)
  pagu_anggaran         Decimal   @db.Decimal(18, 2)
  realisasi_pengeluaran Decimal   @db.Decimal(18, 2)
  unit_kerja_id         Int
  created_at            DateTime? @default(now()) @db.Timestamp(6)
  updated_at            DateTime? @default(now()) @db.Timestamp(6)
  users                 users     @relation(fields: [unit_kerja_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model status_inovasi {
  id            Int             @id @default(autoincrement())
  created_at    DateTime        @default(now()) @db.Timestamptz(6)
  status        String?         @db.VarChar
  ProdukInovasi ProdukInovasi[]

  @@schema("makarti")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model users {
  created_at          DateTime              @default(now()) @db.Timestamptz(6)
  unit_kerja          String?
  username            String                @db.VarChar @unique
  password            String?               @db.VarChar
  id                  Int                   @id @unique @default(autoincrement())
  role_id             Int?
  alias               String?               @db.VarChar(255)
  Inovasi             Inovasi[]
  Koordinasi          Koordinasi[]
  Networking          Networking[]
  Pelatihan           Pelatihan[]
  Penyelenggaraan     Penyelenggaraan[]
  ProdukInovasi       ProdukInovasi[]
  Publikasi           Publikasi[]
  SkpTransformasional SkpTransformasional[]
  Sosialisasi         Sosialisasi[]
  kajian              kajian[]
  pegawai             pegawai[]
  serapan_anggaran    serapan_anggaran[]
  role_user           role_user?            @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("makarti")
}
